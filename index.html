<html>
  <head>

  </head>
  <body>
    <div style="width:70%;text-align: center;margin:auto;">
      <div style="font-size:3rem;">
        Average Benchmark Index: <span id="average"></span>
      </div>
      <div style="text-align:left;font-size:2rem;">
        Your Lighthouse Benchmark results:
        <ul id="benchmark-results"></ul>
      </div>
    </div>
    <script>
      function ultradumbBenchmark() {
        const start = Date.now();
        let iterations = 0;

        while (Date.now() - start < 500) {
          let s = ''; // eslint-disable-line no-unused-vars
          for (let j = 0; j < 100000; j++) s += 'a';

          iterations++;
        }

        const durationInSeconds = (Date.now() - start) / 1000;
        return Math.round(iterations / durationInSeconds);
      }

      function appendToList(listElem, list) {
        for (element in list) {
          let elem = document.createElement("li");
          elem.innerHTML = list[element];
          listElem.appendChild(elem);
        };
      }
      
      // Record the results
      let arrResults = [];

      for (let i = 0; i < 10; i++) {
        arrResults.push(ultradumbBenchmark());
      }

      let results = document.querySelector("#benchmark-results");
      
      appendToList(results, arrResults);

      // get average
      let average = 0;

      for (let i = 0; i < arrResults.length; i++) {
        average += arrResults[i];
      }
      average /= arrResults.length;

      let averageTitle = document.querySelector("#average");

      averageTitle.innerHTML = average

    </script>
  </body>
</html>